{"version":3,"file":"purchases.js","sourceRoot":"","sources":["../../src/scripts/purchases.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Summary: Connects the add item button to the /items/add endpoint\n */\nasync function addItem() {\n    $(\"#item-add-submit\").on(\"click\", () => {\n        const itemData = $(\"#item-add\").serialize();\n        $.ajax({\n            data: itemData,\n            success: (result) => {\n                $(\"#createFormDiv\").trigger(\"hide.bs.modal\");\n                $(\"#message\").html(\"\");\n                $(\"#message\").append(result.status);\n            },\n            type: \"POST\",\n            url: \"/items/add\",\n        });\n    });\n}\n\n/**\n * Gets a list of items from the /items endpoint\n */\nfunction itemsGet() {\n    $.get(\"/items\", (items: any) => {\n        for (const item of items) {\n            const option = new Option(item.Name + \" ($\" + item.Price + \")\", item._id);\n            $(option).html(item.Name + \" ($\" + item.Price + \")\");\n            $(\"#bill-item-id\").append(option);\n        }\n    });\n}\n\n/**\n * Summary: Function used to connect button to the /purchases/add endpoint\n */\nasync function addPurchase() {\n    $(\"#bill-add-submit\").on(\"click\", () => {\n        const itemData = $(\"#purchase-add\").serialize();\n        const userData = $(\"#userId\").serialize();\n        const pageData = itemData + \"&\" + userData;\n\n        $.ajax({\n            data: pageData,\n            success: (result) => {\n                $(\"#message\").html(result.status);\n            },\n            type: \"POST\",\n            url: \"/purchases/add\",\n        });\n    });\n}\n\n/**\n * Summary: format function used to display item search resultd\n * @param item\n */\nfunction formatItem(item: any) {\n    return $(\"<p>\" + item.Name + \" $(\" + item.Price + \")</p>\");\n}\n\n/**\n * Summary: Runs script after the content is loaded\n */\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    // Links button to Modal\n    $(\"#createFormDiv\").on(\"shown.bs.modal\",  () => {\n        $(\"#modalTrigger\").trigger(\"focus\");\n    });\n    // @ts-ignore\n    $(\"#bill-item-id\").select2({\n        ajax: {\n            data: (params: any): any => {\n                return {\n                    q: params.term,\n                };\n            },\n            dataType: \"json\",\n            processResults: (items: any): any => {\n                return {\n                    results: $.map(items, (item: any): any => {\n                        return {\n                            Name: item.Name,\n                            Price: item.Price,\n                            id: item._id,\n                            text: item.Name + \" $(\" + item.Price + \")\",\n                        };\n                    }),\n                };\n            },\n            url: \"/items/query\",\n        },\n        // templateResult: formatItem,\n    });\n    // Submits a form to add an item\n    addItem()\n        .catch((err) => {\n            $(\"#error\").html(\"Could not connect add item button to endpoint\");\n        });\n\n    // Submits a form to add a purchase to a bill\n    addPurchase()\n        .catch((err) => {\n            $(\"#error\").html(\"Could not connect add purchase button to endpoint\");\n        });\n});\n"]}